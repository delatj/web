<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Circuitos en Paralelo - A4 Optimizado</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f0f0f0; }
        
        .no-print { 
            text-align: center; padding: 10px; background: white; 
            margin-bottom: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
        }

        /* Márgenes reducidos a 4mm para maximizar espacio */
        .page { 
            width: 210mm; 
            height: 296mm; 
            padding: 4mm; 
            margin: 0 auto; 
            background: white; 
            box-sizing: border-box; 
            display: flex; 
            flex-direction: column; 
        }

        .ejercicios-container { flex-grow: 1; display: flex; flex-direction: column; }

        .ejercicio-row { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 6px; 
            border-bottom: 1px dashed #aaa; 
            padding: 4px 0;
        }

        .col { 
            border: 2px solid #000; 
            padding: 6px; 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between;
        }

        .header-letra { font-weight: bold; font-size: 15px; }
        
        /* Altura de circuito ajustada */
        .circuit-container { width: 100%; height: 90px; }
        
        /* TAMAÑO DE LETRA A 14px Y NEGRITA */
        .data-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            font-size: 14px; 
            border-top: 2px solid #000; 
            padding-top: 4px; 
            margin-top: 2px; 
            font-weight: bold;
        }

        .soluciones { 
            border-top: 3px solid #000; 
            padding-top: 5px; 
            font-size: 11px; 
            margin-top: auto; 
        }

        .soluciones-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; font-weight: bold; }

        button { 
            padding: 8px 16px; font-size: 15px; cursor: pointer; 
            background-color: #007bff; color: white; border: none; border-radius: 4px; font-weight: bold;
        }

        @media print { 
            .no-print { display: none; } 
            body { background: white; padding: 0; } 
            .page { border: none; margin: 0; width: 100%; height: 297mm; } 
        }
    </style>
</head>
<body>

<div class="no-print">
    <button onclick="generar()">Generar Nuevos Datos Paralelo</button>
    <button onclick="window.print()" style="background-color: #28a745; margin-left: 10px;">Imprimir PDF</button>
</div>

<div class="page">
    <div id="ejercicios-box" class="ejercicios-container"></div>
    <div class="soluciones">
        <div style="font-weight: bold; text-decoration: underline; margin-bottom: 3px; font-size: 12px;">SOLUCIONES (Req, P e Incógnita):</div>
        <div id="soluciones-box" class="soluciones-grid"></div>
    </div>
</div>

<script>
    const tipos = [
        { id: 'a', rCount: 2, inc: 'I' },
        { id: 'b', rCount: 3, inc: 'V' },
        { id: 'c', rCount: 2, inc: 'V' },
        { id: 'd', rCount: 3, inc: 'I' }
    ];

    function drawParallelCircuit(numR) {
        let rs = `<line x1="80" y1="20" x2="80" y2="40" stroke="black" stroke-width="1.5"/><rect x="70" y="40" width="20" height="30" fill="white" stroke="black" stroke-width="2"/><line x1="80" y1="70" x2="80" y2="90" stroke="black" stroke-width="1.5"/><text x="65" y="35" font-size="11" font-weight="bold">R1</text>`;
        
        if(numR >= 2) {
            rs += `<line x1="80" y1="20" x2="120" y2="20" stroke="black" stroke-width="1.5"/><line x1="120" y1="20" x2="120" y2="40" stroke="black" stroke-width="1.5"/><rect x="110" y="40" width="20" height="30" fill="white" stroke="black" stroke-width="2"/><line x1="120" y1="70" x2="120" y2="90" stroke="black" stroke-width="1.5"/><line x1="120" y1="90" x2="80" y2="90" stroke="black" stroke-width="1.5"/><text x="105" y="35" font-size="11" font-weight="bold">R2</text>`;
        }
        
        if(numR >= 3) {
            rs += `<line x1="120" y1="20" x2="160" y2="20" stroke="black" stroke-width="1.5"/><line x1="160" y1="20" x2="160" y2="40" stroke="black" stroke-width="1.5"/><rect x="150" y="40" width="20" height="30" fill="white" stroke="black" stroke-width="2"/><line x1="160" y1="70" x2="160" y2="90" stroke="black" stroke-width="1.5"/><line x1="160" y1="90" x2="120" y2="90" stroke="black" stroke-width="1.5"/><text x="145" y="35" font-size="11" font-weight="bold">R3</text>`;
        }

        return `<svg viewBox="0 0 180 110" class="circuit-container">
            <line x1="30" y1="20" x2="80" y2="20" stroke="black" stroke-width="1.5"/><line x1="30" y1="90" x2="80" y2="90" stroke="black" stroke-width="1.5"/>
            <line x1="30" y1="20" x2="30" y2="45" stroke="black" stroke-width="1.5"/><line x1="20" y1="45" x2="40" y2="45" stroke="black" stroke-width="3"/>
            <line x1="25" y1="55" x2="35" y2="55" stroke="black" stroke-width="1.5"/><line x1="30" y1="55" x2="30" y2="90" stroke="black" stroke-width="1.5"/>
            <text x="5" y="55" font-size="13" font-weight="bold">V</text>${rs}</svg>`;
    }

    function generar() {
        const eBox = document.getElementById('ejercicios-box');
        const sBox = document.getElementById('soluciones-box');
        eBox.innerHTML = ''; sBox.innerHTML = '';

        tipos.forEach(t => {
            let v = Math.floor(Math.random() * 20) + 5;
            let i_total = Math.floor(Math.random() * 4) + 1;
            let r1 = (Math.floor(Math.random() * 5) + 1) * 10;
            let r2 = (Math.floor(Math.random() * 5) + 1) * 10;
            let r3 = (Math.floor(Math.random() * 5) + 1) * 10;

            let invReq = (1/r1) + (1/r2) + (t.rCount === 3 ? (1/r3) : 0);
            let req = 1 / invReq;
            
            let p, solInc;

            if(t.inc === 'V') { 
                v = Number((i_total * req).toFixed(1)); 
                solInc = v + "V"; 
            } else { 
                i_total = Number((v / req).toFixed(1)); 
                solInc = i_total + "A"; 
            }
            
            p = (v * i_total).toFixed(1);

            const bloque = `<div class="col">
                <div class="header-letra">${t.id.toUpperCase()})</div>
                ${drawParallelCircuit(t.rCount)}
                <div class="data-grid">
                    <div>V=${t.inc==='V'?'?':v+'V'}</div>
                    <div>I=${t.inc==='I'?'?':i_total+'A'}</div>
                    <div>R1=${r1}Ω</div>
                    <div>R2=${r2}Ω</div>
                    ${t.rCount>=3 ? `<div>R3=${r3}Ω</div>` : '<div></div>'}
                    <div style="color:blue">Req=?</div><div style="color:blue">P=?</div>
                </div>
            </div>`;
            
            const fila = document.createElement('div');
            fila.className = 'ejercicio-row';
            fila.innerHTML = bloque + bloque + bloque;
            eBox.appendChild(fila);

            sBox.innerHTML += `<div>${t.id.toUpperCase()}: Req=${req.toFixed(1)}Ω, P=${p}W, ${t.inc}=${solInc}</div>`;
        });
    }
    window.onload = generar;
</script>
</body>
</html>