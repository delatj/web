<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador de Palancas - A4 Optimizado</title>
    <style>
        /* Reducción de márgenes globales */
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f0f0f0; }
        .no-print { text-align: center; padding: 10px; background: white; margin-bottom: 5px; }
        
        /* Configuración A4 con márgenes mínimos para maximizar espacio */
        .page { 
            width: 210mm; 
            height: 296mm; 
            padding: 5mm; 
            margin: 0 auto; 
            background: white; 
            box-sizing: border-box; 
            display: flex; 
            flex-direction: column; 
        }

        .ejercicios-container { flex-grow: 1; }

        /* Filas ajustadas para que quepan las 5 */
        .ejercicio-row { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 8px; 
            border-bottom: 1px dashed #ccc; 
            padding: 6px 0;
        }

        /* Cuadros de ejercicio */
        .col { 
            border: 2px solid #000; 
            padding: 8px; 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between;
        }

        .header-letra { font-weight: bold; font-size: 16px; margin-bottom: 2px; }
        
        .lever-container { width: 100%; height: 90px; margin: 5px 0; }
        
        /* DATOS A 16px Y NEGRITA */
        .data-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            font-size: 16px; 
            border-top: 2px solid #000; 
            padding-top: 6px; 
            margin-top: 4px;
            font-weight: bold;
        }

        .soluciones { 
            border-top: 3px solid #000; 
            padding-top: 8px; 
            margin-top: auto; 
            font-size: 12px; 
        }

        .soluciones-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; font-weight: bold; }

        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 4px; margin: 0 5px; font-weight: bold; }

        @media print { 
            .no-print { display: none; } 
            body { background: white; padding: 0; } 
            .page { border: none; margin: 0; width: 100%; height: 297mm; } 
        }
    </style>
</head>
<body>

<div class="no-print">
    <button onclick="generar()">Generar Nuevas Palancas</button>
    <button onclick="window.print()" style="background-color: #28a745;">Imprimir PDF</button>
</div>

<div class="page">
    <div id="ejercicios-box" class="ejercicios-container"></div>
    <div class="soluciones">
        <div style="font-weight: bold; text-decoration: underline; margin-bottom: 5px; font-size: 14px;">SOLUCIONES (Ley de la Palanca: P · dp = F · df):</div>
        <div id="soluciones-box" class="soluciones-grid"></div>
    </div>
</div>

<script>
    function drawLever() {
        return `
        <svg viewBox="0 0 200 100" class="lever-container">
            <rect x="20" y="45" width="160" height="4" fill="#555" />
            <polygon points="100,50 90,75 110,75" fill="black" />
            <rect x="25" y="25" width="20" height="20" fill="none" stroke="black" stroke-width="1.5" />
            <text x="28" y="20" font-size="12" font-weight="bold">P</text>
            <line x1="175" y1="15" x2="175" y2="45" stroke="black" stroke-width="2" />
            <path d="M175,45 L170,35 L180,35 Z" fill="black" />
            <text x="170" y="12" font-size="12" font-weight="bold">F</text>
            <line x1="35" y1="65" x2="100" y2="65" stroke="black" stroke-width="1" stroke-dasharray="2" />
            <text x="60" y="78" font-size="11" font-weight="bold">dp</text>
            <line x1="100" y1="65" x2="175" y2="65" stroke="black" stroke-width="1" stroke-dasharray="2" />
            <text x="135" y="78" font-size="11" font-weight="bold">df</text>
        </svg>`;
    }

    function generar() {
        const eBox = document.getElementById('ejercicios-box');
        const sBox = document.getElementById('soluciones-box');
        eBox.innerHTML = ''; sBox.innerHTML = '';
        const letras = ['a', 'b', 'c', 'd', 'e'];

        letras.forEach(letra => {
            // Valores aleatorios coherentes
            let p = Math.floor(Math.random() * 45) + 5;
            let dp = Math.floor(Math.random() * 15) + 2;
            let df = Math.floor(Math.random() * 15) + 2;
            let f = (p * dp) / df;

            // Elegir qué variable será la incógnita
            const vars = ['P', 'dp', 'F', 'df'];
            const inc = vars[Math.floor(Math.random() * vars.length)];

            let resultado;
            if (inc === 'P') { resultado = (f * df) / dp; }
            else if (inc === 'dp') { resultado = (f * df) / p; }
            else if (inc === 'F') { resultado = (p * dp) / df; }
            else { resultado = (p * dp) / f; }

            const unidad = (inc === 'P' || inc === 'F') ? 'N' : 'm';

            const bloque = `
                <div class="col">
                    <div class="header-letra">${letra.toUpperCase()}) Palanca</div>
                    ${drawLever()}
                    <div class="data-grid">
                        <div>P=${inc==='P'?'?':p+'N'}</div>
                        <div>F=${inc==='F'?'?':f.toFixed(1)+'N'}</div>
                        <div>dp=${inc==='dp'?'?':dp+'m'}</div>
                        <div>df=${inc==='df'?'?':df+'m'}</div>
                    </div>
                </div>`;
            
            const fila = document.createElement('div');
            fila.className = 'ejercicio-row';
            fila.innerHTML = bloque + bloque + bloque;
            eBox.appendChild(fila);

            sBox.innerHTML += `<div>${letra.toUpperCase()}: ${inc} = ${resultado.toFixed(2)}${unidad}</div>`;
        });
    }

    window.onload = generar;
</script>
</body>
</html>